function initBannerTouch(e){function t(e){for(;-1!=this.className.indexOf("move");)this.className=this.className.replace("move","");v=1,w=1,u=!0,N=0,E=[0,0]}function n(e){if(1!=e.touches.length||1!=N&&0!=N||!this.getAttribute("data-proportio")||1==this.getAttribute("data-proportio")){if(2==e.touches.length&&(2==N||0==N)){N=2;var t=[e.touches[0].pageX,e.touches[1].pageX],n=[e.touches[0].pageY,e.touches[1].pageY];f=[(t[0]+t[1])/2,(n[0]+n[1])/2],g=Math.sqrt(Math.pow(t[0]-t[1],2),Math.pow(n[0]-n[1],2)),u&&g>0&&(u=!1,h=g,p=f,this.getAttribute("data-proportio")&&(v=this.getAttribute("data-proportio"),E[0]=parseInt(this.getAttribute("data-left")),E[1]=parseInt(this.getAttribute("data-top")))),w=(h+(g-h)/3*2)/h*v,w=function(e){return browser.os.iOS?(e<1?e=1-(1-e)/2:e>3.5?e=2.833:e>2.5&&(e=2.5+(e-2.5)/3),e):s(e)}(w),this.setAttribute("data-proportio",w),y=[(f[0]-p[0])/w+E[0],(f[1]-p[1])/w+E[1]],l(this,w,y[0],y[1]),e.preventDefault(),e.stopPropagation()}}else N=1,f=[e.touches[0].pageX,e.touches[0].pageY],u&&(u=!1,p=f,this.getAttribute("data-proportio")&&(w=v=this.getAttribute("data-proportio"),E[0]=parseInt(this.getAttribute("data-left")),E[1]=parseInt(this.getAttribute("data-top")))),y=[(f[0]-p[0])/w+E[0],(f[1]-p[1])/w+E[1]],l(this,w,y[0],y[1]),e.preventDefault(),e.stopPropagation()}function a(e){var t=this;w=s(w),y[0]=o(y[0],t),y[1]=i(y[1],t),function(e,n,a,s){l(e,n,a,s),t.setAttribute("data-proportio",n),t.setAttribute("data-left",a),t.setAttribute("data-top",s),t.className+=" move"}(t,w,y[0],y[1])}function s(e){return e<1?1:e>2.5?2.5:e}function o(e,t){var n=document.documentElement.clientWidth,a=t.clientWidth*s(w);if(n>=a)return 0;var o=t.getBoundingClientRect().left;return o>0?(o>n/3&&r(),(a-n)/2/w):n-(a+o)>0?(n-(a+o)>n/3&&c(),-(a-n)/2/w):e}function i(e,t){var n=document.documentElement.clientHeight,a=t.clientHeight*s(w);if(n>=a)return 0;var o=t.getBoundingClientRect().top;return o>0?(a-n)/2/w:n-(a+o)>0?-(a-n)/2/w:e}function l(e,t,n,a){var s="scale3d("+t+","+t+",1) translate3d("+n+"px, "+a+"px , 0)";e.style.transform=s,e.style.webkitTransform=s}for(var r=e.leftFn,c=e.rightFn,m=document.getElementsByClassName("jd_banner_touch"),d=0;d<m.length;d++)m[d].addEventListener("touchstart",t,!1),m[d].addEventListener("touchmove",n,!1),m[d].addEventListener("touchend",a,!1);var u=!0,h=0,g=0,v=1,f=[0,0],p=[0,0],y=[0,0],E=[0,0],N=0,w=1}function chooseAddress(e){for(var t=document.getElementsByClassName("address_select"),n=0;n<t.length;n++)t[n].addEventListener("click",function(){document.getElementsByClassName("choosed")[0]&&(document.getElementsByClassName("choosed")[0].className=document.getElementsByClassName("choosed")[0].className.replace("choosed","")),this.className=this.className+" choosed"},!1)}!function(){"use strict";function e(t,a){var s;if(a=a||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=a.touchBoundary||10,this.layer=t,this.tapDelay=a.tapDelay||200,this.tapTimeout=a.tapTimeout||700,!e.notNeeded(t)){for(var o=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],i=this,l=0,r=o.length;l<r;l++)i[o[l]]=function(e,t){return function(){return e.apply(t,arguments)}}(i[o[l]],i);n&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,a){var s=Node.prototype.removeEventListener;"click"===e?s.call(t,e,n.hijacked||n,a):s.call(t,e,n,a)},t.addEventListener=function(e,n,a){var s=Node.prototype.addEventListener;"click"===e?s.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),a):s.call(t,e,n,a)}),"function"==typeof t.onclick&&(s=t.onclick,t.addEventListener("click",function(e){s(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!t,a=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,s=a&&/OS 4_\d(_\d)?/.test(navigator.userAgent),o=a&&/OS [6-7]_\d/.test(navigator.userAgent),i=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(a&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,a;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),a=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return n&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;a&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(!(t=e.fastClickScrollParent)||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,o;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],a){if(o=window.getSelection(),o.rangeCount&&!o.isCollapsed)return!0;if(!s){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},e.prototype.onTouchMove=function(e){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0)},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,i,l,r,c,m=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,i=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,o&&(c=e.changedTouches[0],m=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)||m,m.fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(l=m.tagName.toLowerCase())){if(t=this.findControl(m)){if(this.focus(m),n)return!1;m=t}}else if(this.needsFocus(m))return e.timeStamp-i>100||a&&window.top!==window&&"input"===l?(this.targetElement=null,!1):(this.focus(m),this.sendClick(m,e),a&&"select"===l||(this.targetElement=null,e.preventDefault()),!1);return!(!a||s||!(r=m.fastClickScrollParent)||r.fastClickLastScrollTop===r.scrollTop)||(this.needsClick(m)||(e.preventDefault(),this.sendClick(m,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;n&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,a,s;if(void 0===window.ontouchstart)return!0;if(a=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(a>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(i&&(s=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),s[1]>=10&&s[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||(!!(+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]>=27&&(t=document.querySelector("meta[name=viewport]"))&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||("none"===e.style.touchAction||"manipulation"===e.style.touchAction))},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}();var browser={os:function(){var e=navigator.userAgent;return{linux:!!e.match(/\(X11;( U;)? Linux/i),windows:!!e.match(/Windows/i),android:!!e.match(/Android/i),iOS:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}}(),device:function(){var e=navigator.userAgent;return{mobile:!!e.match(/AppleWebKit/i),iPhone:!!e.match(/iPhone/i),iPad:!!e.match(/iPad/i)}}(),supplier:function(){var e=navigator.userAgent;return{qq:!!e.match(/QQ\/\d+/i),wechat:!!e.match(/MicroMessenger/i),weixin:"MicroMessenger"==e.match(/MicroMessenger/i),ios:e.indexOf("_JFiOS")>-1,android:e.indexOf("_jfAndroid")>-1,mobile:!!e.match(/AppleWebKit.*Mobile.*/)}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase(),androidVersion:function(){var e=navigator.userAgent,t=e.indexOf("Android");if(t>=0)return parseFloat(e.slice(t+8))}(),IosVersion:function(){var e=navigator.userAgent.toLowerCase(),t=e.match(/cpu iphone os (.*?) like mac os/);return t?t[1].replace(/_/g,"."):-1}()},windowBanEvent={bundling:function(){for(var e=this,t=["click","touchstart","touchmove","touchend"],n=0;n<t.length;n++)document.body.addEventListener(t[n],e.Canceling,!1),addEventListener(t[n],e.Canceling,!1)},unbundling:function(){for(var e=this,t=["click","touchstart","touchmove","touchend"],n=0;n<t.length;n++)document.body.removeEventListener(t[n],e.Canceling,!1),removeEventListener(t[n],e.Canceling,!1)},Canceling:function(e){var e=e||window.event;e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e.returnValue=!1,e.cancelBubble=!0)}};document.addEventListener("touchstart",function(){},!1),browser.os.iOS&&document.addEventListener("touchmove",function(){var e=document.activeElement;if("INPUT"==e.tagName){-1==["checkbox","radio","button","image","range","reset","submit","week"].indexOf(e.getAttribute("type"))&&e.blur()}},!1),function(){function e(){c=plus.webview.currentWebview(),t(c)}function t(e){e.overrideUrlLoading({mode:"reject"},function(e){console.log("reject url: "+e.url),console.log("return url: "+a(e.url)),console.log(window.location.href),n(e.url)})}function n(e){if(-1==e.indexOf("thiswebview"))if(e.indexOf("tel")>-1){var t=e.substr(4);plus.device.dial(t,!0)}else l(a(e),0,0,{hardwareAccelerated:!0,kerne:"WKWebview",titleNView:{backgroundColor:"#49c999",titleColor:"#fff",autoBackButton:!0}});else{c.overrideUrlLoading({mode:"allow"});var n=null;"iOS"==plus.os.name?window.location.href=e:(n=500,setTimeout(function(){window.location.href=e},n))}}function a(e){var t=e,n=t.indexOf("#");return-1!=n&&n+1==t.length?t.substring(0,n):t}function s(){c=plus.webview.currentWebview(),plus.key.addEventListener("backbutton",function(){i()},!1)}function o(){return!1}function i(e){function t(){c||(c=plus.webview.currentWebview()),e||c.preate?c.hide("auto"):c.close("auto")}if(d.plus&&history.length>1){var n=window.location.href;console.log("thisUrl"+n),history.back(),setTimeout(function(){var e=window.location.href;console.log("lastUrl"+e),n==e&&t()},200)}else d.plus?t():d.close()}function l(e,t,n,a){if(d.plus){t&&(g=plus.nativeUI.showWaiting()),a=a||{},a.scrollIndicator||(a.scrollIndicator="none"),a.scalable||(a.scalable=!1);return plus.webview.getWebviewById(e)?(h=plus.webview.getWebviewById(e),h.show(m),h.reload(),h):(h=plus.webview.create(""+e,e,a),n||h.addEventListener("loaded",function(){h.show(m),r()},!1),h.addEventListener("close",function(){h=null},!1),h)}return d.open(e),null}function r(){g&&g.close(),g=null}var c=null,m="pop-in";window.plus?e():document.addEventListener("plusready",e,!1);var d=window;d.plus?s():document.addEventListener("plusready",s,!1);var u=!1;document.addEventListener("DOMContentLoaded",function(){u=!0,document.body.onselectstart=o},!1);var h=null,g=null}();var shoppingCart={changeX:1,changeY:1,xhr:function(e){var t=this,n=e.api||0,a=e.type||"get",s=function(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveObject("Micrsorf.XMLHttp")}();s.onreadystatechange=function(){switch(s.readyState){case 0:case 1:case 2:case 3:break;case 4:s.status>=200&&s.status<300||304==s.status?t.fn(s.responseText,e):console.log("读取失败")}},s.open(a,n),s.send(null)},run:function(e){this.xhr(e),this.changeClass(e)},changeClass:function(){function e(){t(2);for(var e=0;e<a.length&&this!=a[e];e++);this.className="show",n.getElementsByClassName("address")[e].className+=" show"}function t(e){for(var t=0;t<e;t++)n.getElementsByClassName("show")[0].className=n.getElementsByClassName("show")[0].className.replace("show","")}var n=document.getElementById("delivery_address"),a=n.getElementsByClassName("top_address")[0].getElementsByTagName("div");if(n.getElementsByClassName("show")[0]&&t(1),a[0].innerHTML="请选择",-1==a[0].className.indexOf("show")&&(a[0].className="show"),-1==n.getElementsByClassName("address")[0].className.indexOf("show")&&(n.getElementsByClassName("address")[0].className+=" show"),this.changeX){for(var s=0;s<a.length;s++)a[s].addEventListener("click",e,!1);this.changeX=0}},fn:function(e,t){function n(e,t){for(var n="",s=0;s<t.length;s++)n+='<p data-li="'+s+'">'+t[s].name+"</p>";e.innerHTML=n;for(var o=e.getElementsByTagName("p"),i=0;i<o.length;i++)o[i].addEventListener("click",a,!1)}function a(){this.parentNode.getElementsByClassName("p_show")[0]&&this.parentNode.getElementsByClassName("p_show")[0].removeAttribute("class"),this.className="p_show"}function s(e){if(this.className.indexOf("show")>-1){for(var t=0;t<h.length&&this!=h[t];t++);var a=e.target.getAttribute("data-li");g[t]=a,g=g.slice(0,t+1);for(var s,d=m,u=0;u<=t&&(s=d[g[u]],d=s.child);u++);var f=c.getElementsByClassName("top_address")[0].getElementsByTagName("div");if(v[t]=s.name,v=v.slice(0,t+1),f[t].innerHTML=s.name,f[t].removeAttribute("class"),d)f[t+1].innerHTML="请选择",f[t+1].className="show",h[t+1].className+=" show",this.className=this.className.replace(" show",""),n(h[t+1],d);else{if(o.showaddress){for(var p="",y=0;y<v.length;y++)p+=v[y],y!=v.length-1&&(p+="，");i.innerHTML=p}else{var E=v[0],N=v[1];i&&(i.innerHTML=E),l&&(l.innerHTML=N)}chooseAdressId=function(){for(var e=[],t=m,n=0;n<g.length;n++)e[n]=t[g[n]].id,t=t[g[n]].child;return e}(),setTimeout(function(){r()},300)}}}var o=this;o.showaddress=t.addressPart||0;for(var i=t.firstTargetDom,l=t.lastTargetDom,r=t.fn,c=document.getElementById("delivery_address"),m=JSON.parse(e).data,d=c.getElementsByClassName("top_address")[0].getElementsByTagName("div"),u=1;u<d.length;u++)d[u].innerHTML="";n(c.getElementsByClassName("address")[0],m);var h=c.getElementsByClassName("address");if(this.changeY){for(var u=0;u<h.length;u++)h[u].addEventListener("click",s);this.changeY=0}var g=[],v=[]}},jfShowTips={toastShow:function(e){var t=this;e||(e={});var n=e.text||"null",a="<span>"+n+"</span>";t.toastRemove();var s="";if(browser.os.iOS){var o=document.activeElement;if("INPUT"==o.tagName){-1==["checkbox","radio","button","image","range","reset","submit","week"].indexOf(o.getAttribute("type"))&&(s="tip_input")}}var i=this.addNode("div",a,"tip_toast",s);setTimeout(function(){t.remove(i)},2e3)},toastRemove:function(){document.getElementById("tip_toast")&&this.remove(document.getElementById("tip_toast"))},loadingShow:function(e){var t=this;e||(e={}),windowBanEvent.bundling(),t.loadingRemove();var n=e.text||"LOADING..",a=e.overtimeFn||function(){t.toastShow({text:"等待超时"})},s='<div class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div><i>'+n+"</i>";t.addBlur();var o=t.addBg("loading_bg"),i=t.addNode("div",s,"tip_loading");document.activeElement.blur(),i.focus(),setTimeout(function(){i&&(a(),t.remove(i),windowBanEvent.unbundling(),t.removeBlur(),t.transitionEndFn(o,function(){t.removeBg("loading_bg")}),o.style.opacity="0")},5e3)},loadingRemove:function(){var e=this;document.getElementById("tip_loading")&&(windowBanEvent.unbundling(),e.remove(document.getElementById("tip_loading")),e.removeBlur(),e.removeBg("loading_bg"))},addNode:function(e,t,n,a){var s=document.createElement(e);return n&&(s.id=n),a&&(s.className=a),s.innerHTML=t,document.body.appendChild(s),s},addBlur:function(){},removeBlur:function(){},dialogShow:function(e){e||(e={});var t=e.mainText||"null",n=e.minText||"null",a=e.noCheck||!1,s=e.noCancel||!1,o=e.checkFn||null,i=e.checkBtnText||"确认",l=e.cancleBtnText||"取消",r=e.thisUrl||"javascript:void(0)",c=this;c.addBlur();var m=(c.addBg("dialog_bg"),'<div class="text_dialog_container"><div class="text_big">'+t+'</div><div class="text_small">'+n+'</div><div class="dialog_button">');a||(m+='<a class="dialog_check" href='+r+">"+i+"</a>"),s||(m+='<a class="dialog_cancel" href="javascript:void(0)">'+l+"</a>"),m+="</div></div>";var d=c.addNode("div",m,"tip_dialog");d.getElementsByClassName("dialog_cancel")[0]&&d.getElementsByClassName("dialog_cancel")[0].addEventListener("click",c.dialogRemove.bind(c),!1),o&&d.getElementsByClassName("dialog_check")[0].addEventListener("click",o,!1)},dialogRemove:function(){var e=this,t=document.getElementById("tip_dialog");e.removeBlur(),t.style.opacity="0",e.settimeoutFn(function(){e.remove(t)});var n=document.getElementById("dialog_bg");e.settimeoutFn(function(){e.removeBg("dialog_bg")}),n.style.opacity="0"},smallDialogShow:function(e){e||(e={});var t=e.mainText||"null",n=e.minText||"null",a=e.noCheck||!1,s=e.noCancel||!1,o=e.checkFn||null,i=e.checkBtnText||"确认",l=e.cancleBtnText||"取消",r=e.thisUrl||"javascript:void(0)",c=this;c.addBlur();var m=(c.addBg("dialog_bg"),'<div class="text_dialog_container small_dialog"><div class="text_big">'+t+'</div><div class="text_small">'+n+'</div><div class="dialog_button">');a||(m+='<a class="dialog_check" href='+r+">"+i+"</a>"),s||(m+='<a class="dialog_cancel" href="javascript:void(0)">'+l+"</a>"),m+="</div></div>";var d=c.addNode("div",m,"tip_dialog");d.getElementsByClassName("dialog_cancel")[0]&&d.getElementsByClassName("dialog_cancel")[0].addEventListener("click",c.dialogRemove.bind(c),!1),o&&d.getElementsByClassName("dialog_check")[0].addEventListener("click",o,!1)},addBg:function(e){var t=this;return t.removeBg(),t.addNode("div","",e,"tip_bg")},removeBg:function(e){document.getElementById(e)&&this.remove(document.getElementById(e))},remove:function(e){var t=e.parentNode;t&&t.removeChild(e)},transitionEndFn:function(e,t){e.addEventListener("webkitTransitionEnd",t),e.addEventListener("transitionend",t)},settimeoutFn:function(e){setTimeout(e,500)}},jfShowPop=function(e){function t(){this.hide()}e||(e={}),this.details=e;var n=document.getElementById(this.details.ele),a=this.details.scrollClassname||0;n.getElementsByClassName("pop_cancel")[0].addEventListener("click",t.bind(this),!1),n.getElementsByClassName("jf_pop_up_bg")[0].addEventListener("click",t.bind(this),!1),a&&function(e){function t(e){s=e.touches[0].pageY}function a(e){var t=this,n=t.scrollTop,a=t.scrollHeight,l=t.offsetHeight,r=t.clientHeight;o=e.touches[0].pageY,i=s-o,o=s,Math.abs(parseFloat(a)-parseFloat(r))<3&&e.preventDefault(),Math.abs(parseFloat(a)-parseFloat(n+l))<=2?i>0&&e.preventDefault():0==Math.abs(parseFloat(n))&&i<0&&e.preventDefault()}var s,o,i,l=n.getElementsByClassName(e)[0],r=n.getElementsByClassName("sku_volume_purchased")[0],c=n.getElementsByClassName("pop_top")[0],m=n.getElementsByClassName("top_address")[0],d=document.getElementById("address_select").getElementsByClassName("address")[0];if(l.addEventListener("touchstart",t,!1),l.addEventListener("touchmove",a,!1),d)for(var u=0;u<d.length;u++)d[u].addEventListener("touchmove",windowBanEvent.Canceling,!1);r&&r.addEventListener("touchmove",windowBanEvent.Canceling,!1),m&&m.addEventListener("touchmove",windowBanEvent.Canceling,!1),c.addEventListener("touchmove",windowBanEvent.Canceling,!1)}(a)};jfShowPop.prototype.show=function(e){e&&e.fn();var t=document.getElementById(this.details.ele);t.style.display="block",setTimeout(function(){-1==t.className.indexOf("show")&&(t.className+=" show")},1),document.getElementsByClassName("jf_pop_up_bg")[0].addEventListener("touchmove",windowBanEvent.Canceling,!1)},jfShowPop.prototype.hide=function(){var e=document.getElementById(this.details.ele);e.className.indexOf("show")>-1&&(!function(e){function t(){e.style.display="none",e.removeEventListener("webkitTransitionEnd",t),e.removeEventListener("transitionend",t)}e.addEventListener("webkitTransitionEnd",t),e.addEventListener("transitionend",t)}(e),e.className=e.className.replace(" show","")),windowBanEvent.unbundling()};var jfAutoPlay={jfAutoPlayInit:function(){function e(){var e=document.getElementsByClassName("jf_homepage_autoplay")[0];e.addEventListener("touchmove",a,!1),e.addEventListener("touchend",s,!1)}function t(){var e=document.getElementsByClassName("jf_homepage_autoplay")[0];e.removeEventListener("touchmove",a,!1),e.removeEventListener("touchend",s,!1)}function n(e){var t=document.getElementsByClassName("jf_homepage_autoplay")[0].getElementsByClassName("jf_autoplay_images")[0];browser.os.iOS&&e.preventDefault(),clearInterval(f),g=E=e.touches[0].clientX;var n=t.getElementsByClassName("show")[0];n.className.indexOf("delay")<0&&N?(n.className+=" delay",t.getElementsByClassName("after")[0].className+=" delay",t.getElementsByClassName("before")[0].className+=" delay",function(){var e=document.getElementsByClassName("jf_homepage_autoplay")[0].getElementsByClassName("jf_autoplay_images")[0],t=e.getElementsByClassName("show")[0];if(browser.os.iOS&&t.className.indexOf("delay")>-1&&t.className.indexOf("move")>-1&&t.getAttribute("style").indexOf("translate3d")>-1){for(var n=0,a=e.getElementsByTagName("a"),s=0;s<a.length;s++)a[s].className&&0==a[s].getBoundingClientRect().left&&(n=s);a[n].className="show delay",0==n?(a[a.length-1].className="before delay",a[n+1].className="after delay"):n==a.length-1?(a[0].className="after delay",a[n-1].className="before delay"):(a[n+1].className="after delay",a[n-1].className="before delay");for(var s=0;s<a.length;s++)a[s].removeAttribute("style");t.style.opacity=.1,t.className=t.className.replace("delay",""),setTimeout(function(){t.style.opacity=""},1)}}()):(t.style.transition="transform 0s",t.style.webkitTransition="-webkit-transform 0s")}function a(e){var t=document.body.clientWidth;browser.os.iOS&&e.preventDefault(),windowBanEvent.bundling();var n=e.touches[0].clientX;v=n-g>t/3||n-E>6?1:n-g<-t/3||n-E<-6?2:0;var a=document.getElementsByClassName("jf_homepage_autoplay")[0].getElementsByClassName("jf_autoplay_images")[0];if(N)d(a.getElementsByClassName("show")[0],n-g+"px"),d(a.getElementsByClassName("after")[0],n-g+"px"),d(a.getElementsByClassName("before")[0],n-g+"px");else{var s=n-g;y?s>=0?d(a,s-t+"px"):d(a,s/4-t+"px"):s<=0?d(a,s+"px"):d(a,s/4+"px")}E=n}function s(e){function t(){windowBanEvent.unbundling(),u(a,t),u(n,t)}browser.os.iOS&&e.preventDefault();var n=document.getElementsByClassName("jf_homepage_autoplay")[0].getElementsByClassName("jf_autoplay_images")[0],a=n.getElementsByClassName("show")[0],s=n.getElementsByClassName("after")[0];if(N){var m=n.getElementsByClassName("before")[0];a.className=a.className.replace(" delay",""),s.className=s.className.replace(" delay",""),m.className=m.className.replace(" delay","")}if(2==v&&N)r();else if(2==v)i();else if(1==v&&N)c();else if(1==v)l();else{if(N)d(a,0),d(s,0),d(m,0);else if(n.style.transition="",n.style.webkitTransition="",y){var w=document.body.clientWidth;d(n,"-"+w+"px")}else d(n,0);h(a,t),h(n,t)}f=N?setInterval(r,p):setInterval(o,p),v=g=E=0,windowBanEvent.unbundling()}function o(){y?l():i()}function i(){var e=document.getElementsByClassName("jf_homepage_autoplay")[0].getElementsByClassName("jf_autoplay_images")[0],t=document.body.clientWidth;e.style.transition="",e.style.webkitTransition="",d(e,"-"+t+"px"),y=1,m(1)}function l(){var e=document.getElementsByClassName("jf_homepage_autoplay")[0].getElementsByClassName("jf_autoplay_images")[0];e.style.transition="",e.style.webkitTransition="",d(e,0),y=0,m(0)}function r(){function n(){i.className+=" delay",l.className+=" delay",setTimeout(function(){o.className="",i.className="before delay",d(i,0),l.className="show delay ",d(l,0);for(var t=0,a=0;t<s.length;t++)if(s[t]==l)a=1,m(t);else if(a&&"A"==s[t].tagName)break;t!=s.length?s[t].className="after delay":s[0].className="after delay",u(i,n);for(var t=0;t<s.length;t++)d(s[t],0);e()},1)}t();var a=document.getElementsByClassName("jf_homepage_autoplay")[0].getElementsByClassName("jf_autoplay_images")[0],s=a.getElementsByTagName("a"),o=a.getElementsByClassName("before")[0],i=a.getElementsByClassName("show")[0],l=a.getElementsByClassName("after")[0];if(b){o.className="",i.className="before delay",d(i,0),l.className="show delay ",d(l,0);for(var r=0,c=0;r<s.length;r++)if(s[r].style&&s[r].removeAttribute("style"),s[r]==l)c=1,m(r);else if(c&&"A"==s[r].tagName)break;r!=s.length?s[r].className="after delay":s[0].className="after delay ",e()}else i.className=i.className.replace(" delay"," move"),d(i,"-100%"),l.className=l.className.replace(" delay"," move"),d(l,"-100%"),h(i,n)}function c(){function n(){i.className+=" delay",o.className+=" delay",setTimeout(function(){l.className="",i.className="after delay",d(i,0),o.className="show delay",d(o,0);for(var t=s.length-1,a=0;t>=0;t--)if(s[t]==o)a=1,m(t);else if(a&&"A"==s[t].tagName)break;-1!=t?s[t].className="before delay":s[s.length-1].className="before delay",u(i,n);for(var t=0;t<s.length;t++)d(s[t],0);e()},1)}t();var a=document.getElementsByClassName("jf_homepage_autoplay")[0].getElementsByClassName("jf_autoplay_images")[0],s=a.getElementsByTagName("a"),o=a.getElementsByClassName("before")[0],i=a.getElementsByClassName("show")[0],l=a.getElementsByClassName("after")[0];if(b){l.className="",i.className="after delay",d(i,0),o.className="show delay",d(o,0);for(var r=s.length-1,c=0;r>=0;r--)if(s[r].style&&s[r].removeAttribute("style"),s[r]==o)c=1,m(r);else if(c&&"A"==s[r].tagName)break;-1!=r?s[r].className="before delay":s[s.length-1].className="before delay",e()}else i.className=i.className.replace(" delay"," move_left"),d(i,"100%"),o.className=o.className.replace(" delay"," move_left"),d(o,"100%"),h(i,n)}function m(e){for(var t=document.getElementsByClassName("jf_homepage_autoplay")[0].getElementsByClassName("jf_pagination")[0],n=t.getElementsByTagName("span"),a=0;a<n.length;a++)n[a].removeAttribute("class");var s;s=e>=n.length?0:e,n[s].className="active"}function d(e,t){t?(e.style.transform="translate3d("+t+",0,0)",e.style.webkitTransform="translate3d("+t+",0,0)"):(e.style.transform="",e.style.webkitTransform="")}function u(e,t){e.removeEventListener("transitionend",t),e.removeEventListener("webkitTransitionEnd",t)}function h(e,t){e.addEventListener("transitionend",t),e.addEventListener("webkitTransitionEnd",t)}var g=0,v=0,f=0,p=5e3,y=0,E=0,N=!0,w=!1,b=!1,B=document.getElementsByClassName("jf_homepage_autoplay")[0].getElementsByClassName("jf_autoplay_images")[0],C=B.getElementsByTagName("a"),_=document.getElementsByClassName("jf_homepage_autoplay")[0].getElementsByClassName("jf_pagination")[0];if(B.className="jf_autoplay_images",b=!browser.supplier.wechat&&browser.androidVersion&&browser.androidVersion<5){for(var k=B.getElementsByTagName("img"),T=0;T<k.length;T++){var L=document.body.clientWidth;k[T].style.width=L+"px",k[T].style.height=L/750*400+"px"}2==C.length&&(B.style.whiteSpace="nowrap",C[1].style.marginLeft="-3px")}if(2==C.length?(N=!1,w=!0):1==C.length&&(N=!1,w=!1),w||N){_.innerHTML="";for(var T=0;T<C.length;T++){var x=document.createElement("span");_.appendChild(x)}m(0)}if(C[0].className="show delay",N)C[1].className="after delay",C[C.length-1].className="before delay",f=setInterval(r,p),document.getElementsByClassName("jf_homepage_autoplay")[0].addEventListener("touchstart",n,!1),e();else if(w){for(var L=document.body.clientWidth,T=0;T<C.length;T++)B.getElementsByTagName("a")[T].getElementsByTagName("img")[0].style.width=L+"px",C[T].style.width=L+"px";B.style.width=L*C.length+"px",C[1].className="show",document.getElementsByClassName("jf_homepage_autoplay")[0].addEventListener("touchstart",n,!1),e(),f=setInterval(o,p)}},jfCarouselInit:function(){window.addEventListener("load",function(){jfAutoPlay.jfAutoPlayInit()})}},AnkangMain={mainCompatibleIOS11:function(){var e=document.getElementsByClassName("top_search")[0],t=document.getElementsByClassName("medicine_box")[0],n=document.getElementsByClassName("bottom_tabbar")[0],a=browser.os.iOS&&browser.IosVersion&&browser.IosVersion;browser.supplier.wechat||parseInt(a)>=11&&(t.className+=" compatible_box",e.className+=" compatible_search",n.className+=" compatible_footer")},CompatibleIOS11:function(e,t){var n=browser.os.iOS&&browser.IosVersion&&browser.IosVersion;browser.supplier.wechat||parseInt(n)>=11&&(e.className+=" "+t)},productCompatibleIOS11:function(){var e=document.getElementsByClassName("product_page")[0],t=browser.os.iOS&&browser.IosVersion&&browser.IosVersion;browser.supplier.wechat||parseInt(t)>=11&&(e.className+=" compatible_active_change")}},inputFn={inputCheck:function(e){event.preventDefault();var t=document.getElementsByClassName("yao_input_check_button")[0];if(-1==t.className.indexOf("locked")){var n=e,a=t.innerHTML;t.innerHTML="重新发送"+n+"s",t.className+=" locked";var s=setInterval(function(){t.innerHTML="重新发送"+--n+"s",n<=0&&(clearInterval(s),t.className=t.className.replace("locked",""),t.innerHTML=a)}.bind(this),1e3)}}},akMedicineTab={tabClickFn:function(e){var t=this;e||(e={});var n=e.clickEle||"category_tab",a=e.showTagName||"span";t.fn=e.fn||0,document.getElementsByClassName(n)[0].addEventListener("click",function(e){
var n=e||window.event,s=n.srcElement||n.target;s.className.indexOf("choosed")<0&&s.tagName.toLowerCase()==a&&(document.getElementsByClassName("choosed")[0]&&(document.getElementsByClassName("choosed")[0].className=""),s.className="choosed",t.fn&&t.fn())},!1)}},orderFn={tabChange:function(e){var t=document.getElementsByClassName("order_box")[0],n=document.getElementsByClassName("all_tab")[0].getElementsByTagName("p"),a=window.innerWidth,s=-parseFloat(e)*a;t.style.transform="translate3d("+s+"px,0,0)",t.style.webkitTransform="translate3d("+s+"px,0,0)",document.getElementsByClassName("show")[0].className=document.getElementsByClassName("show")[0].className.replace("show",""),n[e].className="show"},starShow:function(){for(var e=document.getElementsByClassName("star_content"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){var t=e||window.event,n=t.srcElement||t.target;if("IMG"==n.tagName.toUpperCase()){for(var a=this.getElementsByTagName("img"),s=0;s<a.length;s++)a[s].style.filter="grayscale(0)";this.getElementsByClassName("yellow")[0]&&(this.getElementsByClassName("yellow")[0].className=document.getElementsByClassName("yellow")[0].className.replace("yellow","")),n.className="yellow"}},!1)},evaluateBoxShow:function(){document.getElementsByClassName("evaluate_box")[0].style.display="block",setTimeout(function(){document.getElementsByClassName("evaluate_box")[0].className=document.getElementsByClassName("evaluate_box")[0].className+" box_show"},1)},evaluateBoxhide:function(){document.getElementsByClassName("evaluate_box")[0].style.display="none"}},productInfoPlay={figer:{ischange:!0,ismove:!0},init:function(e){var t=this;if(e||(e={}),t.moveEle=e.moveEle||"allimg",t.moveEleParent=e.moveEleParent||"demo1",t.scaleEleParent=e.scaleEleParent||"jdshow_center_center",t.allShowEle=e.allShowEle||!1,t.fn=e.fn||0,t.thisPosition=0,t.moveDistanceX=0,t.moveDistanceY=0,t.initPointEle(t.moveEleParent),t.moveEvent(),t.allShowEle){document.getElementsByClassName(t.allShowEle)[0].getElementsByClassName(t.moveEle)[0].innerHTML=document.getElementsByClassName(t.moveEle)[0].innerHTML,document.getElementsByClassName("img_content")[0].addEventListener("touchmove",function(e){e.preventDefault()},!1);for(var n=document.getElementsByClassName(t.moveEle)[0].getElementsByClassName(t.scaleEleParent),a=0;a<n.length;a++)n[a].getElementsByTagName("div")[0].className="";document.getElementsByClassName("delete_banner")[0].addEventListener("click",function(){for(var e=document.getElementsByClassName("jd_banner_touch"),n=0;n<e.length;n++)e[n].style.transform="scale3d(1,1,1) translate3d(0,0,0)";document.getElementsByClassName(t.allShowEle)[0].style.display="none",document.getElementsByTagName("body")[0].style.overflow="",document.getElementsByTagName("html")[0].style.overflow="",document.getElementsByTagName("body")[0].style.height="100%",document.getElementsByTagName("html")[0].style.height="100%"},!1),initBannerTouch({leftFn:function(){},rightFn:function(e){}})}},moveEvent:function(){function e(e){var t=e||window.event;a=parseFloat(t.touches[0].clientX),s=parseFloat(t.touches[0].clientY),d=u=a}function t(e){var t=e||window.event;return o=parseFloat(t.changedTouches[0].clientX),i=parseFloat(t.changedTouches[0].clientY),d=u,u=o,l.moveDistanceX=o-a,l.moveDistanceY=i-s,Math.abs(u-d)}function n(){for(var e=0;e<r.length;e++)r[e].className=""+l.moveEle,r[e].removeEventListener("transitionend",n,!1),r[e].removeEventListener("transitionend",n,!1)}var a,s,o,i,l=this,r=document.getElementsByClassName(l.moveEle),c=r[0].getElementsByClassName(l.scaleEleParent).length-1,m=window.innerWidth,d=0,u=0,h=0;r[0].addEventListener("touchstart",function(t){1==(t||window.event).touches.length&&(l.moveDistanceX=0,l.moveDistanceY=0,l.figer.ischange=!0,e(t),(this.className=l.moveEle+" contentchange")&&(this.className=""+l.moveEle))},!1),r[0].addEventListener("touchmove",function(e){var n=e||window.event;1==n.touches.length&&(h=t(e),l.figer.ischange&&(Math.abs(l.moveDistanceY)>Math.abs(l.moveDistanceX)?l.figer.ismove=!1:l.figer.ismove=!0,l.figer.ischange=!1),l.figer.ismove&&(n.preventDefault(),n.stopPropagation(),(0==l.thisPosition&&l.moveDistanceX>0||l.thisPosition==-c&&l.moveDistanceX<0)&&(l.moveDistanceX=l.moveDistanceX/3),l.changeTranslate(parseFloat(l.thisPosition*m)+parseFloat(l.moveDistanceX)+"px")))},!1),r[0].addEventListener("touchend",function(e){1==(e||window.event).changedTouches.length&&l.figer.ismove&&(this.className=l.moveEle+" contentchange",this.parentElement==document.getElementsByClassName(l.moveEleParent)[0]&&l.thisPosition==-c&&l.moveDistanceX<0&&Math.abs(l.moveDistanceX)>55&&l.fn&&l.fn(),Math.abs(l.moveDistanceX)>m/3||h>6?l.movePosition(l.moveDistanceX):l.changeTranslate(parseFloat(l.thisPosition*m)+"px"),l.transitionFn(n))},!1),r[0].addEventListener("click",function(){l.showNewBanner()},!1)},movePosition:function(e){var t=this,n=window.innerWidth,a=document.getElementsByClassName(t.moveEle),s=a[0].getElementsByClassName(t.scaleEleParent).length-1,o=document.getElementsByClassName("allpoint"),i=o[0].getElementsByTagName("span"),l=o[o.length-1].getElementsByTagName("span");if(parseFloat(e)<0?t.thisPosition>-s?t.thisPosition--:t.thisPosition=-s:parseFloat(e)>0&&(t.thisPosition<0?t.thisPosition++:t.thisPosition=0),t.changeTranslate(n*this.thisPosition+"px"),i){for(var r=0;r<o.length;r++)o[r].getElementsByClassName("showpoint")[0].className="";i[-this.thisPosition].className="showpoint",l[-this.thisPosition].className="showpoint"}},initPointEle:function(e){for(var t=this,n=document.getElementsByClassName(t.moveEle)[0].getElementsByClassName(t.scaleEleParent),a="",s=0;s<n.length;s++)a+=0==s?'<span class="showpoint"></span>':"<span></span>";!function(t,n,a){var s=document.createElement(t);a&&(s.className=a),s.innerHTML=n,document.getElementsByClassName(e)[0].appendChild(s)}("div",a,"allpoint")},changeTranslate:function(e){for(var t=this,n=document.getElementsByClassName(t.moveEle),a=0;a<n.length;a++)n[a].style.transform="translateX("+e+")",n[a].style.webkitTransform="translateX("+e+")"},transitionFn:function(e){for(var t=this,n=document.getElementsByClassName(t.moveEle),a=0;a<n.length;a++)n[a].addEventListener("TransitionEnd",e,!1),n[a].addEventListener("webkitTransitionEnd",e,!1)},showNewBanner:function(){var e=this,t=window.innerHeight;0==e.moveDistanceX&&0==e.moveDistanceY&&e.allShowEle&&(document.getElementsByClassName(e.allShowEle)[0].style.display="block",document.getElementsByTagName("body")[0].style.height=t+"px",document.getElementsByTagName("html")[0].style.height=t+"px",document.getElementsByTagName("body")[0].style.overflow="hidden",document.getElementsByTagName("html")[0].style.overflow="hidden")}},jfProductDetails={slidePositionTab:function(){if(!browser.os.iOS){var e=document.getElementById("NavTab"),t=document.getElementById("NavTabEmpty");!function(){t.getBoundingClientRect().top<=0?(e.style.position="fixed",e.style.top="45px",e.style.zIndex="100"):e.style.cssText=""}()}},clickTabChange:function(e,t,n){for(var a=e.getElementsByClassName(n),s=0;s<a.length;s++)a[s].addEventListener("click",function(){e.getElementsByClassName(t)[0].className=e.getElementsByClassName(t)[0].className.replace(t,""),this.className+=" "+t},!1)},skuBoxChange:function(){for(var e=document.getElementById("main_sku").getElementsByClassName("sku_contain"),t=0;t<e.length;t++)jfProductDetails.clickTabChange(e[t],"choose_tab","sku_box")},tabScrollChange:function(){window.addEventListener("scroll",function(){function e(e,t,n){e.getElementsByClassName("choose_tab")[0]&&(e.getElementsByClassName("choose_tab")[0].className=e.getElementsByClassName("choose_tab")[0].className.replace("choose_tab","")),e.getElementsByClassName(t)[n].className+=" choose_tab"}var t=document.getElementById("NavTab"),n=document.getElementsByClassName("product_nav_contain")[0],a=t.offsetHeight+n.offsetHeight,s=document.getElementsByClassName("product_images_parameter")[0],o=document.getElementsByClassName("product_images_service")[0],i=document.getElementsByClassName("product_images")[0];i.getBoundingClientRect().top>t.offsetHeight?e(document.getElementsByClassName("content")[0],"nav_tab",0):i.getBoundingClientRect().top<=t.offsetHeight&&(e(document.getElementsByClassName("content")[0],"nav_tab",1),function(){o.getBoundingClientRect().top-a<=0?e(document.getElementById("NavTab"),"tab",2):s.getBoundingClientRect().top-a<=0?e(document.getElementById("NavTab"),"tab",1):e(document.getElementById("NavTab"),"tab",0)}())})},scrollEle:function(e,t){function n(){l=(25-i)/25*.9+1,a=document.body.scrollTop+r/50*l,window.scrollTo(0,a),50==++i&&(window.scrollTo(0,s),clearInterval(o))}var a,s=e.getBoundingClientRect().top+document.body.scrollTop-t,o=setInterval(n,5),i=0,l=1,r=s-document.body.scrollTop},changeHideBtn:function(e){var t=document.getElementsByClassName("prompt_btn")[0];t.getElementsByClassName("hidebtn")[0].className=t.getElementsByClassName("hidebtn")[0].className.replace("hidebtn",""),t.getElementsByClassName(e)[0].className+=" hidebtn"},volumeChange:function(e){function t(){var e=this.parentNode.getElementsByClassName("volume_input")[0],t=parseInt(e.value);this.className.indexOf("reduce")>-1?e.value=n(t-1):e.value=n(t+1)}function n(e){return e<=1||!e?1:e}function a(){window.scrollTo(0,i),s()}function s(){this.value=n(this.value)}function o(){i=document.body.scrollTop,setTimeout(function(){window.scrollTo(0,document.body.scrollHeight)},300)}for(var i,l=document.getElementsByClassName("volume_btn"),r=0;r<l.length;r++)if(l[r].getElementsByClassName("reduce")[0].addEventListener("touchstart",t,!1),l[r].getElementsByClassName("add")[0].addEventListener("touchstart",t,!1),l[r].getElementsByClassName("volume_input")[0].addEventListener("blur",s,!1),browser.os.iOS&&e){var c=l[r].getElementsByClassName("volume_input")[0];c.addEventListener("focus",o,!1),c.addEventListener("blur",a,!1)}},clickThrough:function(e,t){function n(e){s=e.touches[0].pageY}function a(e){var t=this,n=t.scrollTop,a=t.scrollHeight,l=t.offsetHeight;o=e.touches[0].pageY,i=s-o,o=s,Math.abs(parseFloat(a)-parseFloat(n+l))<=2?i>0&&e.preventDefault():0==Math.abs(parseFloat(n))&&i<0&&e.preventDefault()}for(var s,o,i,l=document.getElementById(e).getElementsByClassName(t),r=document.getElementsByClassName("pop_top")[0],c=document.getElementById("address_select").getElementsByClassName("top_address")[0],m=0;m<l.length;m++)l[m].clientHeight<l[m].offsetHeight-4?(l[m].addEventListener("touchstart",n,!1),l[m].addEventListener("touchmove",a,!1)):l[m].addEventListener("touchstart,touchmove",function(e){if(!e||!e.preventDefault)return window.event.returnValue=!1,!1;e.preventDefault()},!1);c&&c.addEventListener("touchmove,touchstart",windowBanEvent.Canceling,!1),r.addEventListener("touchmove",windowBanEvent.Canceling,!1)}},shoppingBoxFn={chooseProNum:function(){for(var e=document.getElementsByClassName("volume_btn"),t=0;t<e.length;t++)e[t].getElementsByClassName("reduce")[0].addEventListener("click",shoppingBoxFn.numChangeFn,!1),e[t].getElementsByClassName("volume_input")[0].addEventListener("blur",shoppingBoxFn.numChangeFn,!1),e[t].getElementsByClassName("add")[0].addEventListener("click",shoppingBoxFn.numChangeFn,!1)},numChangeFn:function(e){(e||window.event).preventDefault();var t=this.parentElement.getElementsByClassName("volume_input")[0],n=t.value;this.className.indexOf("reduce")>-1?t.value=n>1?parseFloat(n)-1:1:this.className.indexOf("add")>-1?t.value=parseFloat(n)+1:n<1&&(t.value=1)},CheckBoxFn:function(){function e(){for(var e=0;e<n.length;e++)if(0==n[e].checked)return!1;return!0}for(var t=document.getElementsByClassName("allcheck"),n=document.getElementsByClassName("singlecheck"),a=document.getElementsByClassName("aui-radio"),s=0;s<t.length;s++)t[s].addEventListener("click",function(){if(1==this.checked)for(var e=0;e<a.length;e++)a[e].checked=!0;else for(var e=0;e<a.length;e++)a[e].checked=!1},!1);for(var o=0;o<n.length;o++)n[o].addEventListener("click",function(){if(0==this.checked)t[0].checked=!1,t[1].checked=!1;else{e()?(t[0].checked=!0,t[1].checked=!0):(t[0].checked=!1,t[1].checked=!1)}},!1)},editFn:function(){var e=document.getElementsByClassName("bottom_go_buy")[0],t=document.getElementsByClassName("bottom_delete")[0];document.getElementsByClassName("shopping_edit")[0].addEventListener("click",function(){this.innerHTML.indexOf("编辑")>-1?(this.innerHTML="完成",e.style.transform="translate3d(0,100%,0)",e.style.webkitTransform="translate3d(0,100%,0)",t.style.transform="translate3d(0,0,0)",t.style.webkitTransform="translate3d(0,0,0)"):(this.innerHTML="编辑",e.style.transform="translate3d(0,0,0)",e.style.webkitTransform="translate3d(0,0,0)",t.style.transform="translate3d(0,100%,0)",t.style.webkitTransform="translate3d(0,100%,0)")},!1)},judegNocheck:function(){for(var e=document.getElementsByClassName("singlecheck"),t=0;t<e.length;t++)if(e[t].checked)return!0;return!1}};


//地址选择

var addressChoose = {

    changeX:1,

    changeY:1,

    /*加载方法*/
    xhr: function (details) {

        var _this = this;

        var api = 'http://testweb.zbkjyy.com/area/list';

        var type = 'get';

        var xhr = function () {
            if (window.XMLHttpRequest) {
                return new XMLHttpRequest();
            } else {
                return new ActiveObject('Micrsorf.XMLHttp');
            }
        }();

        xhr.onreadystatechange = function () {
            switch (xhr.readyState) {
                case 0 :
                    // console.log(0, '未初始化....');
                    break;
                case 1 :
                    /*console.log(1, '请求参数已准备，尚未发送请求...');*/
                    break;
                case 2 :
                    /*console.log(2, '已经发送请求,尚未接收响应');*/
                    break;
                case 3 :
                    /*console.log(3, '正在接受部分响应.....');*/
                    break;
                case 4 :
                    /*console.log(4, '响应全部接受完毕');*/
                    if ((xhr.status >= 200 && xhr.status < 300) || xhr.status == 304) {

                        _this.fn(xhr.responseText,details);

                    }

                    else {

                        console.log('读取失败');

                    }
                    break;
            }
        };

        xhr.open(type, api);

        xhr.send(null);

    },

    run: function (details) {

        var _this=this;

        this.xhr(details);

        this.changeClass(details)

    },

    //切换样式名称
    changeClass: function () {

        var allEle = document.getElementById('delivery_address');

        var firstEle = allEle.getElementsByClassName('top_address')[0].getElementsByTagName('div');

        if(allEle.getElementsByClassName('show')[0]){

            clearClass(1)
        }

        firstEle[0].innerHTML='请选择';

        if(firstEle[0].className.indexOf('show')==-1) {

            firstEle[0].className = 'show';

        }

        if(allEle.getElementsByClassName('address')[0].className.indexOf('show')==-1) {

            allEle.getElementsByClassName('address')[0].className += ' show';

        }

        if(this.changeX) {

            for (var i = 0; i < firstEle.length; i++) {

                firstEle[i].addEventListener('click', clickEle, false)

            }

            this.changeX=0;

        }

        function clickEle() {

            clearClass(2);

            for (var j = 0; j < firstEle.length; j++) {

                if (this == firstEle[j]) {

                    break

                }

            }

            this.className = 'show';

            allEle.getElementsByClassName('address')[j].className += ' show';


        }

        function clearClass(num) {

            for (var i = 0; i < num; i++) {

                allEle.getElementsByClassName('show')[0].className = allEle.getElementsByClassName('show')[0].className.replace('show', '');

            }

        }

    },

    /*渲染地址列表*/
    fn: function (thisJson,details) {

        var _this=this;

        _this.showaddress=details.addressPart||0;//判断当前是否将地址分开显示(true-分开；false-不分开)

        var wrightHtmlOne = details.firstTargetDom;

        var wrightHtmlTwo = details.lastTargetDom;

        var thisFn = details.fn;

        var ele = document.getElementById('delivery_address');

        var data = JSON.parse(thisJson).data;

        var tabCity = ele.getElementsByClassName('top_address')[0].getElementsByTagName('div');

        for(var i=1;i<tabCity.length;i++){

            tabCity[i].innerHTML=""

        }

        addLi(ele.getElementsByClassName('address')[0], data);

        function addLi(faEle, allData) {

            var thisDomH = '<p data-li="';

            var thisDomM = '">';

            var thisDomB = '</p>';

            var writeDom = '';


            for (var i = 0; i < allData.length; i++) {

                writeDom += thisDomH + i + thisDomM + allData[i].name + thisDomB

            }

            faEle.innerHTML = writeDom;

            var allP = faEle.getElementsByTagName('p');

            for (var j = 0; j < allP.length; j++) {

                allP[j].addEventListener('click', clickFn, false)

            }

        }

        /*每个元素点击事件*/
        function clickFn() {

            if (this.parentNode.getElementsByClassName('p_show')[0]) {

                this.parentNode.getElementsByClassName('p_show')[0].removeAttribute('class');

            }

            this.className = 'p_show'

        }


        var allTab = ele.getElementsByClassName('address');

        if(this.changeY) {

            for (var i = 0; i < allTab.length; i++) {

                allTab[i].addEventListener('click', fatherEleClick)

            }

            this.changeY=0;

        }

        var allCityPoint = [];

        var thisCityAll = [];

        /*每个父切换元素*/
        function fatherEleClick(evt) {

            if (this.className.indexOf('show') > -1) {

                for (var j = 0; j < allTab.length; j++) {

                    if (this == allTab[j]) {

                        break

                    }

                }

                /*渲染下一个列表*/

                var thisNum = evt.target.getAttribute('data-li');

                allCityPoint[j] = thisNum;

                allCityPoint=allCityPoint.slice(0,j+1);

                var thisData = data;

                var thisCity;

                for (var z = 0; z <= j; z++) {

                    thisCity = thisData[allCityPoint[z]];

                    thisData = thisCity.child;

                    if(!thisData)break

                }



                /*修改tab*/

                var tabCity = ele.getElementsByClassName('top_address')[0].getElementsByTagName('div');

                thisCityAll[j] = thisCity.name;

                thisCityAll=thisCityAll.slice(0,j+1);

                tabCity[j].innerHTML = thisCity.name;

                tabCity[j].removeAttribute('class');


                if (thisData.length>0) {

                    tabCity[j + 1].innerHTML = '请选择';

                    tabCity[j + 1].className = 'show';

                    allTab[j + 1].className += ' show';

                    this.className = this.className.replace(' show', '');

                    addLi(allTab[j + 1], thisData);

                }

                else {

                    console.log(_this.showaddress)


                    if(!_this.showaddress){//只显示后面4-5级

                        var thisAddressLength=thisCityAll.length;

                        wrightHtmlOne.innerHTML=thisCityAll[thisAddressLength-2]+'，'+thisCityAll[thisAddressLength-1];

                    }else {//显示全部地址

                        var thisInnerHtml='';

                        for (var x = 0; x < thisCityAll.length; x++) {

                            thisInnerHtml += thisCityAll[x];

                            if(x!=thisCityAll.length-1) {

                                thisInnerHtml += ''

                            }

                        }

                        console.log(thisInnerHtml)


                        wrightHtmlOne.innerHTML=thisInnerHtml

                    }




                    chooseAdressId=(function(){


                        var allNum=[];

                        var thisData=data;


                        for(var i=0;i<allCityPoint.length;i++) {

                            allNum[i]=thisData[allCityPoint[i]].id;

                            thisData=thisData[allCityPoint[i]].child;

                        }


                        return allNum;



                        //地址数据data;


                    })();


                    setTimeout(function () {

                        thisFn();

                    },300)



                }
                //切换tab


            }

        }

    },


};